/*! chione - v0.1.0 - 24-01-2014 */
(function(){!function(a){return function(b){return udefine.configure(function(c){var d,e,f,g;for(f=0,g=b.length;g>f;f++)d=b[f],e=""+a+"/"+d.toLowerCase(),c[a]||(c[a]={}),udefine.inject.add(e,{root:c[a],name:d});return null})}(["Base","Entity","Game","Scene"])}("chione")}).call(this),function(){var a=[].slice,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},d=function(a,b){return function(){return a.apply(b,arguments)}};udefine("chione/base",["mixedice","eventmap"],function(b,c){var d;return d=function(){function d(a,e){var f,g,h,i,j;if(this.parent=a,b([this,d.prototype],new c),this.type=this.constructor.name,h=""+this.constructor.name.toLowerCase()+ ++this.idIndex,Object.defineProperty(this,"id",{get:function(){return h},set:function(a){return h=a}}),Object.defineProperty(this,"type",{get:function(){return this.constructor.name}}),"function"==typeof e)e.call(this);else for(i in e)if(j=e[i],"events"===i)for(f in i)g=i[f],this.on(f,g);else this[i]=j}return d.prototype.idIndex=0,d.prototype.log=function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],console.log.apply(console,[].concat.apply("["+this.type+"] "+this.id+": ",b))},d}()}),udefine("chione/bind/all",function(){}),udefine("chione/bind",function(){return function(a,b,c){var d;return a.children||(a.children={}),d=null,("function"==typeof b||"object"==typeof b)&&(b instanceof c?(d=b,d.parent=a):d=new c(a,b)),a.children[d.id]=d}}),udefine("chione/component",["chione/base","chione/mixins/updatable"],function(a,b){var d,e;return e=function(a,b){var c;return null==b&&(b=/[\s,]/),c=b.split(b),c.map(function(a){return a.trim()}).filter(function(a){return!!a}),c.length?c:null},d=function(a){function d(){var a;d.__super__.constructor.apply(this,arguments),a=[],Object.defineProperty(this,"tags",{get:function(){return a},set:function(b){return null==a?a=b:Array.isArray(b)?a=b:"string"==typeof b?a=b.split(" "):void 0}}),b(this)}return c(d,a),d.prototype.find=function(){var a,b;return a="",b=""},d}(a)}),udefine("chione/components/animatable",["chione/component"],function(a){var b,d;return b=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments)}return c(b,a),b}(a)}),udefine("chione/components/audio",["chione/component"],function(a){var b,d;return b=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments)}return c(b,a),b}(a)}),udefine("chione/components/collidable",["chione/component"],function(a){var b,d;return b=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments)}return c(b,a),b}(a)}),udefine("chione/entity",["chione/component","chione/bind","chione/mixins/drawable"],function(a,b,d){var e;return e=function(e){function f(){this.width=this.height=100,f.__super__.constructor.apply(this,arguments),d(this)}return c(f,e),f.prototype.component=function(c){return b(this,c,a)},f.prototype.entity=function(a){return b(this,a,f)},f}(a)}),udefine("chione/factory/game",["chione/game"],function(a){return function(b){return new a(b)}}),udefine("chione/game",["requestanimationframe","chione/entity","chione/bind","chione/scene"],function(a,b,e,f){var g;return g=function(b){function g(a){this.run=d(this.run,this);var b=this;return this instanceof g?(this.canvas=new fabric.Canvas("canvas"),this.canvas.setWidth(this.width),this.canvas.setHeight(this.height),g.__super__.constructor.call(this,null,a),this.on("draw",function(){return b.canvas.renderAll()}),void 0):new g(a)}return c(g,b),g.prototype.scene=function(a){return e(this,a,f)},g.prototype.run=function(b){var c;return null==b&&(c=Object.keys(this.children),b=c[c.length-1]),this.trigger("run",b),a(this.draw)},g}(b)}),udefine("chione/mixins/drawable",function(){return function(a){return a.on("draw",function(){})}}),udefine("chione/mixins/updatable",function(){return function(a){return a.on("update",function(){var b,c,d;if(null!=a.children){d=a.children;for(b in d)c=d[b],"function"==typeof c.trigger&&c.trigger("update",arguments);return null}})}}),udefine("chione/preloader",["chione/base"],function(a){var b;return b=function(a){function b(){}return c(b,a),b.prototype.add=function(){},b.prototype.run=function(){},b}(a)}),udefine("chione/scene",["chione/entity","chione/bind"],function(a,b){var d;return d=function(a){function d(){d.__super__.constructor.apply(this,arguments)}return c(d,a),d.prototype.entity=function(a){return b(this,a,Component)},d}(a)}),udefine("chione/sprite",["chione/components/animatable","chione/entity"],function(a,b){var d;return d=function(b){function d(){d.__super__.constructor.apply(this,arguments),this.component(new a)}return c(d,b),d}(b)})}.call(this);